import{_ as e}from"./ActionMessage.24d98f15.js";import{_ as o}from"./Modal.b02e0653.js";import{_ as s}from"./Button.9e794eb8.js";import{_ as t}from"./ConfirmationModal.a855b58d.js";import{_ as n}from"./DangerButton.f0e7e8c9.js";import{_ as i}from"./DialogModal.1a71a52e.js";import{_ as a}from"./FormSection.087f4aa4.js";import{_ as r}from"./Input.3370192f.js";import{_ as l}from"./Checkbox.56474599.js";import{_ as m}from"./InputError.78d398ee.js";import{_ as c}from"./Label.e03d479b.js";import{_ as p}from"./SecondaryButton.ce63d693.js";import{_ as d}from"./SectionBorder.35251854.js";import{d as u,r as k,o as g,g as f,s as T,w as h,f as A,F as y,x as b,t as v,i as F,n as j,u as _}from"./vendor.a36873b3.js";import"./SectionTitle.7e28176a.js";const P=u({components:{JetActionMessage:e,JetActionSection:o,JetButton:s,JetConfirmationModal:t,JetDangerButton:n,JetDialogModal:i,JetFormSection:a,JetInput:r,JetCheckbox:l,JetInputError:m,JetLabel:c,JetSecondaryButton:p,JetSectionBorder:d},props:["tokens","availablePermissions","defaultPermissions"],data(){return{createApiTokenForm:this.$inertia.form({name:"",permissions:this.defaultPermissions}),updateApiTokenForm:this.$inertia.form({permissions:[]}),deleteApiTokenForm:this.$inertia.form(),displayingToken:!1,managingPermissionsFor:null,apiTokenBeingDeleted:null}},methods:{createApiToken(){this.createApiTokenForm.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{this.displayingToken=!0,this.createApiTokenForm.reset()}})},manageApiTokenPermissions(e){this.updateApiTokenForm.permissions=e.abilities,this.managingPermissionsFor=e},updateApiToken(){this.updateApiTokenForm.put(route("api-tokens.update",this.managingPermissionsFor),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.managingPermissionsFor=null})},confirmApiTokenDeletion(e){this.apiTokenBeingDeleted=e},deleteApiToken(){this.deleteApiTokenForm.delete(route("api-tokens.destroy",this.apiTokenBeingDeleted),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.apiTokenBeingDeleted=null})}}}),x=_(" Create API Token "),C=_(" API tokens allow third-party services to authenticate with our application on your behalf. "),S={class:"col-span-6 sm:col-span-4"},D={key:0,class:"col-span-6"},w={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},B={class:"flex items-center"},J={class:"ml-2 text-sm text-gray-600"},I=_(" Created. "),M=_(" Create "),$={key:0},L={class:"mt-10 sm:mt-0"},U=_(" Manage API Tokens "),V=_(" You may delete any of your existing tokens if they are no longer needed. "),E={class:"space-y-6"},N={class:"flex items-center"},Y={key:0,class:"text-sm text-gray-400"},q=["onClick"],z=["onClick"],G=_(" API Token "),H=A("div",null," Please copy your new API token. For your security, it won't be shown again. ",-1),K={key:0,class:"\n                        mt-4\n                        bg-gray-100\n                        px-4\n                        py-2\n                        rounded\n                        font-mono\n                        text-sm text-gray-500\n                    "},O=_(" Close "),Q=_(" API Token Permissions "),R={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},W={class:"flex items-center"},X={class:"ml-2 text-sm text-gray-600"},Z=_(" Cancel "),ee=_(" Save "),oe=_(" Delete API Token "),se=_(" Are you sure you would like to delete this API token? "),te=_(" Cancel "),ne=_(" Delete ");P.render=function(e,o,s,t,n,i){const a=k("jet-label"),r=k("jet-input"),l=k("jet-input-error"),m=k("jet-checkbox"),c=k("jet-action-message"),p=k("jet-button"),d=k("jet-form-section"),u=k("jet-section-border"),_=k("jet-action-section"),P=k("jet-secondary-button"),ie=k("jet-dialog-modal"),ae=k("jet-danger-button"),re=k("jet-confirmation-modal");return g(),f("div",null,[T(d,{onSubmitted:e.createApiToken},{title:h((()=>[x])),description:h((()=>[C])),form:h((()=>[A("div",S,[T(a,{for:"name",value:"Name"}),T(r,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:e.createApiTokenForm.name,"onUpdate:modelValue":o[0]||(o[0]=o=>e.createApiTokenForm.name=o),autofocus:""},null,8,["modelValue"]),T(l,{message:e.createApiTokenForm.errors.name,class:"mt-2"},null,8,["message"])]),e.availablePermissions.length>0?(g(),f("div",D,[T(a,{for:"permissions",value:"Permissions"}),A("div",w,[(g(!0),f(y,null,b(e.availablePermissions,(s=>(g(),f("div",{key:s},[A("label",B,[T(m,{value:s,checked:e.createApiTokenForm.permissions,"onUpdate:checked":o[1]||(o[1]=o=>e.createApiTokenForm.permissions=o)},null,8,["value","checked"]),A("span",J,v(s),1)])])))),128))])])):F("",!0)])),actions:h((()=>[T(c,{on:e.createApiTokenForm.recentlySuccessful,class:"mr-3"},{default:h((()=>[I])),_:1},8,["on"]),T(p,{class:j({"opacity-25":e.createApiTokenForm.processing}),disabled:e.createApiTokenForm.processing},{default:h((()=>[M])),_:1},8,["class","disabled"])])),_:1},8,["onSubmitted"]),e.tokens.length>0?(g(),f("div",$,[T(u),A("div",L,[T(_,null,{title:h((()=>[U])),description:h((()=>[V])),content:h((()=>[A("div",E,[(g(!0),f(y,null,b(e.tokens,(o=>(g(),f("div",{class:"flex items-center justify-between",key:o.id},[A("div",null,v(o.name),1),A("div",N,[o.last_used_ago?(g(),f("div",Y," Last used "+v(o.last_used_ago),1)):F("",!0),e.availablePermissions.length>0?(g(),f("button",{key:1,class:"\n                                            cursor-pointer\n                                            ml-6\n                                            text-sm text-gray-400\n                                            underline\n                                        ",onClick:s=>e.manageApiTokenPermissions(o)}," Permissions ",8,q)):F("",!0),A("button",{class:"\n                                            cursor-pointer\n                                            ml-6\n                                            text-sm text-red-500\n                                        ",onClick:s=>e.confirmApiTokenDeletion(o)}," Delete ",8,z)])])))),128))])])),_:1})])])):F("",!0),T(ie,{show:e.displayingToken,onClose:o[3]||(o[3]=o=>e.displayingToken=!1)},{title:h((()=>[G])),content:h((()=>[H,e.$page.props.jetstream.flash.token?(g(),f("div",K,v(e.$page.props.jetstream.flash.token),1)):F("",!0)])),footer:h((()=>[T(P,{onClick:o[2]||(o[2]=o=>e.displayingToken=!1)},{default:h((()=>[O])),_:1})])),_:1},8,["show"]),T(ie,{show:e.managingPermissionsFor,onClose:o[6]||(o[6]=o=>e.managingPermissionsFor=null)},{title:h((()=>[Q])),content:h((()=>[A("div",R,[(g(!0),f(y,null,b(e.availablePermissions,(s=>(g(),f("div",{key:s},[A("label",W,[T(m,{value:s,checked:e.updateApiTokenForm.permissions,"onUpdate:checked":o[4]||(o[4]=o=>e.updateApiTokenForm.permissions=o)},null,8,["value","checked"]),A("span",X,v(s),1)])])))),128))])])),footer:h((()=>[T(P,{onClick:o[5]||(o[5]=o=>e.managingPermissionsFor=null)},{default:h((()=>[Z])),_:1}),T(p,{class:j(["ml-2",{"opacity-25":e.updateApiTokenForm.processing}]),onClick:e.updateApiToken,disabled:e.updateApiTokenForm.processing},{default:h((()=>[ee])),_:1},8,["onClick","class","disabled"])])),_:1},8,["show"]),T(re,{show:e.apiTokenBeingDeleted,onClose:o[8]||(o[8]=o=>e.apiTokenBeingDeleted=null)},{title:h((()=>[oe])),content:h((()=>[se])),footer:h((()=>[T(P,{onClick:o[7]||(o[7]=o=>e.apiTokenBeingDeleted=null)},{default:h((()=>[te])),_:1}),T(ae,{class:j(["ml-2",{"opacity-25":e.deleteApiTokenForm.processing}]),onClick:e.deleteApiToken,disabled:e.deleteApiTokenForm.processing},{default:h((()=>[ne])),_:1},8,["onClick","class","disabled"])])),_:1},8,["show"])])};export{P as default};
